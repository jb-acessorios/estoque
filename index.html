<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>JB ACESSÓRIOS | Controle de Estoque</title>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>

  <!-- TELA LOGIN (INICIAL) -->
  <section id="view-login" class="view active">
    <div class="login-wrap">
      <div class="login-card">
        <div class="login-brand">
          <img class="login-logo-img" src="assets/images/logo-jb.png" alt="JB" onerror="this.style.display='none'">
          <div class="login-logo-fallback">JB</div>

          <div>
            <h1>JB ACESSÓRIOS</h1>
            <p>Controle de Estoque</p>
          </div>
        </div>

        <label>Senha de acesso</label>
        <input id="login_password" type="password" placeholder="Digite sua senha" autocomplete="current-password"/>

        <button id="btnLoginPage" class="btn-primary" type="button">Entrar</button>

        <div class="login-status">
          <span id="login_msg">Digite a senha para acessar.</span>
        </div>
      </div>
    </div>
  </section>

  <!-- APP (SÓ APARECE APÓS LOGIN) -->
  <section id="view-app" class="view">
    <header class="topbar">
      <div class="brand">
        <div class="brand-mark">JB</div>
        <div class="brand-text">
          <div class="brand-title">JB ACESSÓRIOS</div>
          <div class="brand-sub">Controle de Estoque</div>
        </div>
      </div>

      <div class="topbar-actions">
        <span id="status" class="pill">offline</span>
        <button id="btnLogout" class="btn-outline" type="button">Sair</button>
      </div>
    </header>

    <!-- MENU -->
    <nav class="menu">
      <button class="iconbtn active" data-view="estoque" type="button">
        <img class="menu-ico" src="assets/images/estoque.png" alt="Estoque">
        <span>Estoque</span>
      </button>

      <button class="iconbtn" data-view="cadastros" type="button">
        <img class="menu-ico" src="assets/images/cadastros.png" alt="Cadastros">
        <span>Cadastros</span>
      </button>

      <button class="iconbtn" data-view="movimentacoes" type="button">
        <img class="menu-ico" src="assets/images/movimentacoes.png" alt="Movimentações">
        <span>Movimentações</span>
      </button>

      <button class="iconbtn" data-view="relatorios" type="button">
        <img class="menu-ico" src="assets/images/relatorios.png" alt="Relatórios">
        <span>Relatórios</span>
      </button>
    </nav>

    <main class="main">
      <div class="headline">
        <h2 id="viewTitle">Controle de estoque</h2>
        <div class="headline-actions">
          <button id="btnRefreshAll" class="btn" type="button">Atualizar</button>
        </div>
      </div>

      <!-- ===== VIEW: ESTOQUE ===== -->
      <section id="view-estoque" class="view2 active">
        <div class="card">
          <div class="card-head">
            <h3>Produtos</h3>
            <div class="card-actions">
              <button id="btnItensEmFalta" class="btn" type="button">Itens em falta</button>
              <button id="btnVerTodos" class="btn-outline" type="button">Ver todos</button>
            </div>
          </div>

          <div class="filters">
            <div class="field">
              <label>Peça</label>
              <input id="f_sku" placeholder="Filtrar por peça" autocomplete="off"/>
            </div>
            <div class="field">
              <label>Nome</label>
              <input id="f_nome" placeholder="Filtrar por nome" autocomplete="off"/>
            </div>
            <div class="field">
              <label>Categoria</label>
              <input id="f_categoria" placeholder="Filtrar por categoria" autocomplete="off"/>
            </div>
            <div class="field buttons">
              <button id="btnFiltrar" class="btn" type="button">Filtrar</button>
              <button id="btnLimparFiltro" class="btn-outline" type="button">Limpar</button>
            </div>
          </div>

          <div class="table-wrap">
            <table id="tblProdutos">
              <thead>
                <tr>
                  <th>Peça</th>
                  <th>Descrição</th>
                  <th>Categoria</th>
                  <th>Marca</th>
                  <th>Modelo</th>
                  <th>Estado</th>
                  <th>Atual</th>
                  <th>Mín.</th>
                  <th>Preço</th>
                  <th>Local</th>
                  <th>Ativo</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>

          <p class="hint">JB ACESSORIOS.</p>
        </div>
      </section>

      <!-- ===== VIEW: CADASTROS ===== -->
      <section id="view-cadastros" class="view2">
        <div class="card">
          <div class="card-head">
            <h3>Cadastro de Produto</h3>
            <div class="card-actions">
              <button id="btnNovoProduto" class="btn-outline" type="button">Novo</button>
            </div>
          </div>

          <div class="form-grid" autocomplete="off">
            <input id="p_id" name="p_id" type="hidden" />

            <div class="field wide">
              <label>Peça (manual)</label>
              <input id="p_sku" placeholder="EX: CAPINHA-IPHONE" autocomplete="off"/>
            </div>

            <div class="field wide">
              <label>Nome</label>
              <input id="p_nome" placeholder="Descrição do produto" autocomplete="off"/>
            </div>

            <div class="field">
              <label>Categoria</label>
              <input id="p_categoria" placeholder="EX: CAPA" autocomplete="off"/>
            </div>

            <div class="field">
              <label>Marca</label>
              <input id="p_marca" placeholder="EX: APPLE" autocomplete="off"/>
            </div>

            <div class="field">
              <label>Modelo</label>
              <input id="p_modelo" placeholder="EX: IPHONE 13 / A14 / etc" autocomplete="off"/>
            </div>

            <div class="field">
              <label>Estado</label>
              <select id="p_estado">
                <option value="NOVA">NOVA</option>
                <option value="USADA">USADA</option>
              </select>
            </div>

            <div class="field">
              <label>Custo</label>
              <input id="p_custo" placeholder="0,00" autocomplete="off" inputmode="decimal"/>
            </div>

            <div class="field">
              <label>Preço</label>
              <input id="p_preco" placeholder="0,00" autocomplete="off" inputmode="decimal"/>
            </div>

            <div class="field">
              <label>Estoque atual</label>
              <input id="p_estoque" placeholder="0" autocomplete="off" inputmode="numeric"/>
            </div>

            <div class="field">
              <label>Estoque mínimo</label>
              <input id="p_minimo" placeholder="0" autocomplete="off" inputmode="numeric"/>
            </div>

            <div class="field wide">
              <label>Local</label>
              <input id="p_local" placeholder="EX: ESTOQUE / VITRINE" autocomplete="off"/>
            </div>

            <div class="field">
              <label>Ativo</label>
              <select id="p_ativo">
                <option value="SIM">SIM</option>
                <option value="NAO">NÃO</option>
              </select>
            </div>

            <div class="form-actions">
              <button id="btnSalvarProduto" class="btn" type="button">Salvar</button>
              <button id="btnLimparProduto" class="btn-outline" type="button">Limpar</button>
            </div>
          </div>

          <p class="hint" id="cadHint">Clique em NOVO para criar. Para editar, selecione um item na tabela.</p>
        </div>
      </section>

      <!-- ===== VIEW: MOVIMENTAÇÕES ===== -->
      <section id="view-movimentacoes" class="view2">
        <div class="card">
          <div class="card-head">
            <h3>Movimentações</h3>
            <div class="card-actions">
              <span class="pill">Peça selecionada: <b id="selectedSku">---</b></span>
              <button id="btnLoadMoves" class="btn-outline" type="button">Carregar</button>
            </div>
          </div>

          <div class="form-grid" autocomplete="off">
            <input id="m_id" name="m_id" type="hidden" />

            <div class="field">
              <label>Tipo</label>
              <select id="m_tipo">
                <option value="ENTRADA">ENTRADA</option>
                <option value="SAIDA">SAÍDA</option>
                <option value="AJUSTE">AJUSTE</option>
              </select>
            </div>

            <!-- NOVO: seleção por lista (ID) -->
            <div class="field wide">
              <label>Selecionar peça (por ID)</label>
              <select id="m_pick"></select>
            </div>

            <!-- Campo apenas para exibir a peça escolhida -->
            <div class="field">
              <label>Peça (selecionada)</label>
              <input id="m_sku" placeholder="Será preenchido ao selecionar" autocomplete="off" readonly/>
            </div>

            <div class="field">
              <label>Quantidade</label>
              <input id="m_qtd" placeholder="0" autocomplete="off" inputmode="numeric"/>
            </div>

            <div class="field wide">
              <label>Observações</label>
              <input id="m_obs" placeholder="EX: Venda balcão 00053" autocomplete="off"/>
            </div>

            <div class="field">
              <label>Usuário</label>
              <input id="m_usuario" placeholder="EX: Luziano" autocomplete="off"/>
            </div>

            <div class="form-actions">
              <button id="btnRegistrarMov" class="btn" type="button">Registrar</button>
              <button id="btnLimparMov" class="btn-outline" type="button">Limpar</button>
            </div>
          </div>

          <div class="table-wrap">
            <table id="tblMoves">
              <thead>
                <tr>
                  <th>Data</th>
                  <th>Tipo</th>
                  <th>Peça</th>
                  <th>ID</th>
                  <th>Qtd</th>
                  <th>Obs</th>
                  <th>Usuário</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>

          <div class="footer-row">
            <div class="field small">
              <label>Limite</label>
              <select id="movLimit">
                <option value="50">50</option>
                <option value="100">100</option>
                <option value="200">200</option>
              </select>
            </div>
          </div>
        </div>
      </section>

      <!-- ===== VIEW: RELATÓRIOS ===== -->
      <section id="view-relatorios" class="view2">
        <div class="card">
          <div class="card-head">
            <h3>Relatórios</h3>
            <div class="card-actions">
              <button id="btnRelMinimo" class="btn" type="button">Abaixo do mínimo</button>
              <button id="btnRelZerados" class="btn-outline" type="button">Zerados</button>
              <button id="btnRelLimpar" class="btn-outline" type="button">Limpar</button>
            </div>
          </div>

          <div class="table-wrap">
            <table id="tblRel">
              <thead>
                <tr>
                  <th>Peça</th>
                  <th>Nome</th>
                  <th>Categoria</th>
                  <th>Modelo</th>
                  <th>Estado</th>
                  <th>Estoque</th>
                  <th>Mín.</th>
                  <th>Preço</th>
                  <th>Local</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </section>

    </main>
  </section>

  <script src="app.js"></script>
</body>
</html>
